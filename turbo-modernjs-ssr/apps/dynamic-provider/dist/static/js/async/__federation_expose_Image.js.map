{"version":3,"file":"static/js/async/__federation_expose_Image.js","sources":["F:/codespace/mf-arc-test/modernjs-ssr/node_modules/.pnpm/@rspack+core@1.0.0-alpha.5_@swc+helpers@0.5.11/node_modules/@rspack/core/dist/builtin-plugin/css-extract/hmr/hotModuleReplacement.js","F:/codespace/mf-arc-test/modernjs-ssr/node_modules/.pnpm/@rspack+core@1.0.0-alpha.5_@swc+helpers@0.5.11/node_modules/@rspack/core/dist/builtin-plugin/css-extract/hmr/normalize-url.js","webpack://dynamic_provider/./src/components/Image.module.css?c1e9","F:/codespace/mf-arc-test/modernjs-ssr/apps/dynamic-provider/src/components/Image.tsx"],"sourcesContent":["\"use strict\";\n/* eslint-env browser */\n/*\n  eslint-disable\n  no-console,\n  func-names\n*/\n/** @typedef {any} TODO */\nconst normalizeUrl = require(\"./normalize-url\");\nconst srcByModuleId = Object.create(null);\nconst noDocument = typeof document === \"undefined\";\nconst { forEach } = Array.prototype;\n/**\n * @param {function} fn\n * @param {number} time\n * @returns {(function(): void)|*}\n */\nfunction debounce(fn, time) {\n    let timeout = 0;\n    return function () {\n        // @ts-ignore\n        const self = this;\n        // eslint-disable-next-line prefer-rest-params\n        const args = arguments;\n        const functionCall = function functionCall() {\n            return fn.apply(self, args);\n        };\n        clearTimeout(timeout);\n        // @ts-ignore\n        timeout = setTimeout(functionCall, time);\n    };\n}\nfunction noop() { }\n/**\n * @param {TODO} moduleId\n * @returns {TODO}\n */\nfunction getCurrentScriptUrl(moduleId) {\n    let src = srcByModuleId[moduleId];\n    if (!src) {\n        if (document.currentScript) {\n            ({ src } = /** @type {HTMLScriptElement} */ (document.currentScript));\n        }\n        else {\n            const scripts = document.getElementsByTagName(\"script\");\n            const lastScriptTag = scripts[scripts.length - 1];\n            if (lastScriptTag) {\n                ({ src } = lastScriptTag);\n            }\n        }\n        srcByModuleId[moduleId] = src;\n    }\n    /**\n     * @param {string} fileMap\n     * @returns {null | string[]}\n     */\n    return function (fileMap) {\n        if (!src) {\n            return null;\n        }\n        const splitResult = src.split(/([^\\\\/]+)\\.js$/);\n        const filename = splitResult && splitResult[1];\n        if (!filename) {\n            return [src.replace(\".js\", \".css\")];\n        }\n        if (!fileMap) {\n            return [src.replace(\".js\", \".css\")];\n        }\n        return fileMap.split(\",\").map(mapRule => {\n            const reg = new RegExp(`${filename}\\\\.js$`, \"g\");\n            return normalizeUrl(src.replace(reg, `${mapRule.replace(/{fileName}/g, filename)}.css`));\n        });\n    };\n}\n/**\n * @param {TODO} el\n * @param {string} [url]\n */\nfunction updateCss(el, url) {\n    if (!url) {\n        if (!el.href) {\n            return;\n        }\n        // eslint-disable-next-line\n        url = el.href.split(\"?\")[0];\n    }\n    if (!isUrlRequest(/** @type {string} */ (url))) {\n        return;\n    }\n    if (el.isLoaded === false) {\n        // We seem to be about to replace a css link that hasn't loaded yet.\n        // We're probably changing the same file more than once.\n        return;\n    }\n    if (!url || !(url.indexOf(\".css\") > -1)) {\n        return;\n    }\n    // eslint-disable-next-line no-param-reassign\n    el.visited = true;\n    const newEl = el.cloneNode();\n    newEl.isLoaded = false;\n    newEl.addEventListener(\"load\", () => {\n        if (newEl.isLoaded) {\n            return;\n        }\n        newEl.isLoaded = true;\n        el.parentNode.removeChild(el);\n    });\n    newEl.addEventListener(\"error\", () => {\n        if (newEl.isLoaded) {\n            return;\n        }\n        newEl.isLoaded = true;\n        el.parentNode.removeChild(el);\n    });\n    newEl.href = `${url}?${Date.now()}`;\n    if (el.nextSibling) {\n        el.parentNode.insertBefore(newEl, el.nextSibling);\n    }\n    else {\n        el.parentNode.appendChild(newEl);\n    }\n}\n/**\n * @param {string} href\n * @param {TODO} src\n * @returns {TODO}\n */\nfunction getReloadUrl(href, src) {\n    let ret;\n    // eslint-disable-next-line no-param-reassign\n    href = normalizeUrl(href);\n    src.some(\n    /**\n     * @param {string} url\n     */\n    // eslint-disable-next-line array-callback-return\n    url => {\n        if (href.indexOf(src) > -1) {\n            ret = url;\n        }\n    });\n    return ret;\n}\n/**\n * @param {string} [src]\n * @returns {boolean}\n */\nfunction reloadStyle(src) {\n    if (!src) {\n        return false;\n    }\n    const elements = document.querySelectorAll(\"link\");\n    let loaded = false;\n    forEach.call(elements, el => {\n        if (!el.href) {\n            return;\n        }\n        const url = getReloadUrl(el.href, src);\n        if (!isUrlRequest(url)) {\n            return;\n        }\n        if (el.visited === true) {\n            return;\n        }\n        if (url) {\n            updateCss(el, url);\n            loaded = true;\n        }\n    });\n    return loaded;\n}\nfunction reloadAll() {\n    const elements = document.querySelectorAll(\"link\");\n    forEach.call(elements, el => {\n        if (el.visited === true) {\n            return;\n        }\n        updateCss(el);\n    });\n}\n/**\n * @param {string} url\n * @returns {boolean}\n */\nfunction isUrlRequest(url) {\n    // An URL is not an request if\n    // It is not http or https\n    if (!/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.test(url)) {\n        return false;\n    }\n    return true;\n}\n/**\n * @param {TODO} moduleId\n * @param {TODO} options\n * @returns {TODO}\n */\nmodule.exports = function (moduleId, options) {\n    if (noDocument) {\n        console.log(\"no window.document found, will not HMR CSS\");\n        return noop;\n    }\n    const getScriptSrc = getCurrentScriptUrl(moduleId);\n    function update() {\n        const src = getScriptSrc(options.filename);\n        const reloaded = reloadStyle(src);\n        if (options.locals) {\n            console.log(\"[HMR] Detected local css modules. Reload all css\");\n            reloadAll();\n            return;\n        }\n        if (reloaded) {\n            console.log(\"[HMR] css reload %s\", src.join(\" \"));\n        }\n        else {\n            console.log(\"[HMR] Reload all css\");\n            reloadAll();\n        }\n    }\n    return debounce(update, 50);\n};\n","\"use strict\";\n/* eslint-disable */\n/**\n * @param {string[]} pathComponents\n * @returns {string}\n */\nfunction normalizeUrl(pathComponents) {\n    return pathComponents\n        .reduce(function (accumulator, item) {\n        switch (item) {\n            case \"..\":\n                accumulator.pop();\n                break;\n            case \".\":\n                break;\n            default:\n                accumulator.push(item);\n        }\n        return accumulator;\n    }, /** @type {string[]} */ ([]))\n        .join(\"/\");\n}\n/**\n * @param {string} urlString\n * @returns {string}\n */\nmodule.exports = function (urlString) {\n    urlString = urlString.trim();\n    if (/^data:/i.test(urlString)) {\n        return urlString;\n    }\n    var protocol = urlString.indexOf(\"//\") !== -1 ? urlString.split(\"//\")[0] + \"//\" : \"\";\n    var components = urlString.replace(new RegExp(protocol, \"i\"), \"\").split(\"/\");\n    var host = components[0].toLowerCase().replace(/\\.$/, \"\");\n    components[0] = \"\";\n    var path = normalizeUrl(components);\n    return protocol + host + path;\n};\n","// extracted by css-extract-rspack-plugin\nexport default {\"button\":\"src-components-Image-module__button-OWp6g3\"};\n    if(module.hot) {\n      // 1729405766048\n      var cssReload = require(\"../../../../node_modules/.pnpm/@rspack+core@1.0.0-alpha.5_@swc+helpers@0.5.11/node_modules/@rspack/core/dist/builtin-plugin/css-extract/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":true});\n      module.hot.dispose(cssReload);\n      \n    }\n  ","import React from 'react';\r\nimport styles from './Image.module.css';\r\n\r\nexport default (): JSX.Element => (\r\n  <div\r\n    id=\"remote-components\"\r\n    style={{\r\n      backgroundColor: '#c0e91e',\r\n      color: 'lightgrey',\r\n      padding: '1rem',\r\n    }}\r\n  >\r\n    <h2>\r\n      <strong>dynamic remote</strong>&nbsp;image\r\n    </h2>\r\n    <button\r\n      id=\"dynamic-remote-components-button\"\r\n      style={{ marginBottom: '1rem' }}\r\n      onClick={() => alert('[remote-components] Client side Javascript works!')}\r\n    >\r\n      Click me to test i'm interactive!\r\n    </button>\r\n    <img\r\n      id=\"dynamic-remote-components-image\"\r\n      src=\"https://module-federation.io/module-federation-logo.svg\"\r\n      style={{ width: '100px' }}\r\n      alt=\"serge\"\r\n    />\r\n    <button className={styles['button']}>Button from dynamic remote</button>\r\n  </div>\r\n);"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC7NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACRA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AACA;AAAA;;;;;;AAAA;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;;AACA;;;;;;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;;;AAEA;AAAA;AAAA;;;;;;;;;;;;AAEA"}